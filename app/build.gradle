buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath 'com.stanfy.spoon:spoon-gradle-plugin:1.2.2'
  }
}

apply plugin: 'com.android.application'
apply plugin: 'spoon'

android {
  compileSdkVersion 23
  buildToolsVersion "23.0.1"
  defaultConfig {
    applicationId "com.mamewo.podplayer0"
    minSdkVersion 10
    targetSdkVersion 19
    versionCode 13
    versionName "1.1.1"
  }

  signingConfigs {
    release {
      if(System.getenv("KEYSTORE") != null){
        storeFile file(System.getenv("KEYSTORE"))
        storePassword System.getenv("KEYSTORE_PASSWORD")
        keyAlias System.getenv("KEY_ALIAS")
        keyPassword System.getenv("KEY_PASSWORD")
      }
      else {
        storeFile null
        storePassword ""
        keyAlias ""
        keyPassword ""
      }
    }
  }
  
  buildTypes {
    release {
      minifyEnabled false
      //proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
      signingConfig signingConfigs.release
    }
  }
  
  lintOptions {
    abortOnError false
  }
}

spoon {
  //instrumentationArgs = ["package=com.mamewo.podplayer0.tests"]
  if(project.hasProperty('spoonClassName')){
    className = project.spoonClassName
  }
  else {
    className = 'com.mamewo.podplayer0.tests.TestPodplayerActivity'
  }
  if(project.hasProperty('spoonOutput')){
    baseOutputDir = file("$buildDir/"+project.spoonOutput)
  }
  //className = 'com.mamewo.podplayer0.tests.TestPodcastListPreference'
  //methodName = 'testAddDuplicate'
  // com.mamewo.podplayer0.tests.TestPodplayerExpActivity
  //from 1.5.0?
  //codeCoverage = true
}

dependencies {
  compile project(":podcast_parser")
  compile project(":pulltorefresh")
  compile 'com.android.support:support-v4:23.3.0'
  compile 'com.android.support:appcompat-v7:23.3.0'
  //com.android.support:appcompat-v7:25.0.0

  compile 'com.android.support:preference-v7:23.3.0'
  compile 'com.github.bumptech.glide:glide:3.7.0'
  
  androidTestCompile 'com.jayway.android.robotium:robotium-solo:5.6.3'
  androidTestCompile 'com.squareup.spoon:spoon-client:1.6.4'
  androidTestCompile 'com.jraska:falcon-spoon-compat:1.0.3'

  //androidTestCompile 'com.android.support.test:runner:0.5'
}
